<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml" lang="en">
<head th:replace="layout :: head"></head>

<body>
<nav th:replace="layout :: nav"></nav>
<div th:replace="layout :: jumbotron"></div>
<section>
    <!--<div th:replace="layout :: logo"></div>-->
    <p>
    <div th:replace="layout :: flash"></div>
    </p>

    <div class="container">
        <div class="row">
            <div class="col-sm">
                <select id="select-category" class="form-control">
                    <option class="form-control" th:each="category : ${categories}" th:value="${category}"
                            th:text="${category.name}" th:selected="${category} == ${selectedCategory}">
                        Breakfast
                    </option>
                </select>
            </div>
            <div class="col-sm">
                <input class="form-control" type="text" id="search" placeholder="Search by Description or Ingredients"/>
            </div>
        </div>

        <div class="list">
            <div class="container">
                <div class="col-lg-12">
                    <div class="box list recipes" id="testdelete" th:each="recipe : ${recipes}">
                        <div class="by">
                            <i class="fa fa-user" aria-hidden="true"></i>
                            <span th:text="${recipe.user.username}">User</span>
                            <form class="favorite" th:action="@{|/recipes/${recipe.id}/favorite|}" method="post"
                                  style="display:inline">
                                <button class="favorite-button-index"
                                        th:id="'favorite-button-index' + ${recipe.id}" type="submit">
                                    <img class="testimg"
                                         th:src="${recipe.userFavorites.contains(#authentication.name)} ? @{/assets/images/favorited.svg} : @{/assets/images/favorite.svg}"
                                         style="height: 12px;">
                                </button>
                            </form>
                        </div>
                        <div>
                            <a th:href="@{|/details/${recipe.id}|}">
                                <img class="index-img" th:src="@{|/recipes/image/${recipe.id}|}"/>
                            </a>
                            <h2>
                                <a th:href="@{|/details/${recipe.id}|}" th:text="${recipe.name}">Pancakes</a>
                            </h2>
                            <p class="test" th:text="${recipe.description}">Lorem ipsum dolor sit amet, consectetur
                                adipiscing
                                elit.
                            </p>
                            <div>
                                <div>
                                    <form th:action="@{|/recipes/${recipe.id}|}" th:method="delete">
                                        <p>
                                            <a th:href="@{|/recipes/${recipe.id}/edit|}">
                                                <i class="far fa-edit" aria-hidden="true"></i> Edit </a>
                                            <button th:data-id="${recipe.id}" class="delete-button" type="submit">
                                                <i class="far fa-trash-alt" aria-hidden="true">
                                                </i>
                                                <span>Delete</span>
                                            </button>
                                        </p>
                                    </form>
                                </div>
                            </div>
                            <div sec:authorize="hasRole('ROLE_USER')">
                                <a href="#" class="upvote" th:data-id="${recipe.id}"><i
                                        class="fas fa-arrow-up"></i></a>
                            </div>
                            <div sec:authorize="hasRole('ROLE_USER')">
                                    <span th:id="|votecount-${recipe.id}|" class="votecount"
                                          th:text="${recipe.getVoteCount()}">0</span>
                            </div>
                            <div sec:authorize="hasRole('ROLE_USER')">
                                <a href="#" class="downvote" th:data-id="${recipe.id}" th:disabled="true"><i
                                        class="fas fa-arrow-down"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--<div class="row">&nbsp;</div>-->
</section>
<div th:replace="layout :: scripts"></div>
</body>
</html>
